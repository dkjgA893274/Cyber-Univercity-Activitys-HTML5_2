<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>サンプル9-3</title>
    <style>
		#canvas1{border:1px solid gray;}
    </style>
  </head>
  <body>
 	<p><canvas id="canvas1" width="300" height="300"></canvas></p>
    <script>
		var canvas1 = document.getElementById("canvas1");
		var ctx1 = canvas1.getContext("2d");
		var x,y;
		var drawOK=false;
		canvas1.addEventListener("mousemove",function(e){
		var rect = e.target.getBoundingClientRect();
		x = e.clientX-rect.left;
		y = e.clientY-rect.top;
		ctx1.fillStyle="blue";
		if(drawOK){
		  ctx1.fillRect(x,y,200,100);
		}
	   });
	   
	   canvas1.addEventListener("mouseup",function(e){
	     drawOK = false;
	   });
    </script>
  </body>
</html>